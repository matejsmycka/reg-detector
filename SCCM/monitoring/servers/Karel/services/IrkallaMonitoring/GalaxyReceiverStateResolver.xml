<?xml version="1.0" encoding="utf-8" ?>
<stateResolver>
    <defaultOutput priority="99" state="OK" description="Connection to Galaxy controller is OK"/>

    <extractor name="default">
        <getAttribute path="workerDiagnostics.state" key="State" type="String" />
        <getAttribute path="workerDiagnostics.lastMessageTimestamp" key="LastEventTime" type="DateTime" />
    </extractor>

    <interval axisName="LastEventTime" to="600" intervalName="LastEventOK" />
    <interval axisName="LastEventTime" from="600" intervalName="LastEventWarning" />

    <multiSwitch name="StateSwitch" choice="State">
        <switchNode case="Error">
            <result key="State" value="Error" />
            <result key="Priority" value="10" />
            <result key="Description" value="Connection to Galaxy controller is malfunction" />
        </switchNode>
    </multiSwitch>

    <multiSwitch name="LastMessageTime" choice="LastEventTime">
        <switchNode case="LastEventWarning">
            <result key="State" value="Error" />
            <result key="Priority" value="20" />
            <result key="Description" value="No message from Galaxy controller has arrived in expected time" />
        </switchNode>
    </multiSwitch>
</stateResolver>
